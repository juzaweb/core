function toastr_message(e,t,a=null){"undefined"!=typeof toastr?!0===t?toastr.success(e,a||juzaweb.lang.successfully,{timeOut:3e3}):toastr.error(e,a||juzaweb.lang.error,{timeOut:3e3}):console.error("Toastr is not defined. Please include it in your project.")}function confirm_message(e,t,a="",n="warning"){"undefined"!=typeof Swal?Swal.fire({title:a,text:e,type:n,position:"top",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:juzaweb.lang.yes+"!",cancelButtonText:juzaweb.lang.cancel+"!"}).then(e=>{t(e.value)}):console.error("SweetAlert2 is not defined. Please include it in your project.")}function get_message_response(e){if(!0===e.success)return e.message?{success:!0,message:e.message}:null;if(e.responseJSON){if(e.responseJSON.errors){let t="";return $.each(e.responseJSON.errors,function(e,a){return t=a[0],!1}),{success:!1,message:t}}if(e.responseJSON.message)return{success:!1,message:e.responseJSON.message}}return e.message?{success:!1,message:e.message}:null}function show_message(e,t=!1,a=null){let n=get_message_response(e);if(!n||e.redirect)return;let i=`<div class="text-${n.success?"success":"danger"} jw-message">\n        ${n.message}\n    </div>`;t?$(a??"#jquery-message").append(i):$(a??"#jquery-message").html(i),$(a??"#jquery-message").is(":visible")||$(a??"#jquery-message").show(),$("html, body").animate({scrollTop:$(a??"#jquery-message").offset().top-100},500)}function show_notify(e){let t=get_message_response(e);t&&toastr_message(t.message,t.success)}function htmlspecialchars(e){return(e=String(e)).replace("&","&amp;").replace('"',"&quot;").replace("'","&#039;").replace("<","&lt;").replace(">","&gt;")}function toggle_global_loading(e,t=300){e?$("#admin-overlay").fadeIn(300):setTimeout(function(){$("#admin-overlay").fadeOut(300)},t)}function replace_template(e,t){return e.replace(/{(\w*)}/g,function(e,a){return t.hasOwnProperty(a)?t[a]:""})}function process_each(e,t,a,n={}){let i=0,o=e.length;!function l(){let s=t.call(e[i++]);i<o?setTimeout(l,a):n.completeCallback&&n.completeCallback(s)}()}function random_string(e){let t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(let n=0;n<e;n++)t+=a.charAt(Math.floor(52*Math.random()));return t}function uuidv4(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(+e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>+e/4).toString(16))}function generate_slug(e){const t={"à":"a","á":"a","ả":"a","ã":"a","ạ":"a","ă":"a","ằ":"a","ắ":"a","ẳ":"a","ẵ":"a","ặ":"a","â":"a","ầ":"a","ấ":"a","ẩ":"a","ẫ":"a","ậ":"a","è":"e","é":"e","ẻ":"e","ẽ":"e","ẹ":"e","ê":"e","ề":"e","ế":"e","ể":"e","ễ":"e","ệ":"e","ì":"i","í":"i","ỉ":"i","ĩ":"i","ị":"i","ò":"o","ó":"o","ỏ":"o","õ":"o","ọ":"o","ô":"o","ồ":"o","ố":"o","ổ":"o","ỗ":"o","ộ":"o","ơ":"o","ờ":"o","ớ":"o","ở":"o","ỡ":"o","ợ":"o","ù":"u","ú":"u","ủ":"u","ũ":"u","ụ":"u","ư":"u","ừ":"u","ứ":"u","ử":"u","ữ":"u","ự":"u","ỳ":"y","ý":"y","ỷ":"y","ỹ":"y","ỵ":"y","đ":"d","À":"A","Á":"A","Ả":"A","Ã":"A","Ạ":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẳ":"A","Ẵ":"A","Ặ":"A","Â":"A","Ầ":"A","Ấ":"A","Ẩ":"A","Ẫ":"A","Ậ":"A","È":"E","É":"E","Ẻ":"E","Ẽ":"E","Ẹ":"E","Ê":"E","Ề":"E","Ế":"E","Ể":"E","Ễ":"E","Ệ":"E","Ì":"I","Í":"I","Ỉ":"I","Ĩ":"I","Ị":"I","Ò":"O","Ó":"O","Ỏ":"O","Õ":"O","Ọ":"O","Ô":"O","Ồ":"O","Ố":"O","Ổ":"O","Ỗ":"O","Ộ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ở":"O","Ỡ":"O","Ợ":"O","Ù":"U","Ú":"U","Ủ":"U","Ũ":"U","Ụ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ử":"U","Ữ":"U","Ự":"U","Ỳ":"Y","Ý":"Y","Ỷ":"Y","Ỹ":"Y","Ỵ":"Y","Đ":"D"};return e.split("").map(e=>t[e]||e).join("").toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,"")}function open_share_popup(e,t,a){const n=screen.width/2-t/2,i=screen.height/2-a/2;return window.open(e,"share-popup","width="+t+",height="+a+",left="+n+",top="+i+",scrollbars,resizable"),!1}function initSelect2(e="body"){$(e+" .select2").each(function(){$(this).select2({theme:"bootstrap4",width:$(this).data("width")||"100%",dropdownAutoWidth:!$(this).data("width")})})}function initDatepicker(e="body"){$(e+" .jw-datepicker").each(function(){const e={dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0};$(this).data("min-date")&&(e.minDate=$(this).data("min-date")),$(this).data("max-date")&&(e.maxDate=$(this).data("max-date")),$(this).data("date-format")&&(e.dateFormat=$(this).data("date-format")),$(this).datepicker(e)})}function initEditor(e="body"){tinymce.init({selector:e+" .jw-editor",convert_urls:!0,document_base_url:juzaweb.documentBaseUrl,language:"en"!==juzaweb.locale?juzaweb.locale:void 0,language_url:"en"!==juzaweb.locale?"/plugins/tinymce/langs/"+juzaweb.locale+".js":void 0,urlconverter_callback:function(e,t,a,n){return e.replace(juzaweb.documentBaseUrl,"")},height:400,plugins:["advlist autolink lists link image charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code fullscreen","insertdatetime media nonbreaking save table directionality","emoticons template paste textpattern"],menu:{file:{title:"File",items:"newdocument restoredraft | preview | print "},edit:{title:"Edit",items:"undo redo | cut copy paste | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen"},insert:{title:"Insert",items:"image link media template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | code wordcount"},table:{title:"Table",items:"inserttable | cell row column | tableprops deletetable"}},toolbar:[{name:"new",items:["newdocument"]},{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"media",items:["link","image","media"]},{name:"view",items:["code","preview","fullscreen"]}],file_picker_callback:function(e,t,a){window.tinyMceCallback=e;let n="image"===a.filetype?"image":"file",i=$("#jw-media-modal");if(0===i.length)return void console.error("Media modal not found");i.data("tinymce-mode",!0),i.data("tinymce-type",n);let o=$('<button class="tinymce-media-picker" data-type="'+n+'" style="display:none;"></button>');$("body").append(o),o.click(),o.remove()}})}function initQuickAddCategory(e="body"){$(e).find(".quick-add-category-container").each(function(){const e=$(this),t=e.find(".quick-add-category-form"),a=e.find(".quick-add-category-toggle"),n=e.find(".quick-add-category-save"),i=e.find(".quick-add-category-cancel"),o=e.find(".quick-add-category-name"),l=e.find(".quick-add-category-parent"),s=e.find(".categories-checkbox-list"),r=e.data("store-url"),d=e.data("locale")||"en";a.on("click",function(){t.slideDown(),$(this).hide(),o.focus()}),i.on("click",function(){t.slideUp(),a.show(),o.val(""),l.val("")}),n.on("click",function(){const e=o.val().trim(),t=l.val(),a=$(this).data("input-name")||"categories[]";if(!e)return void alert(o.attr("placeholder")||"Please enter a category name");const n=$(this),i=n.html();n.prop("disabled",!0).html('<i class="fas fa-spinner fa-spin"></i> '+(n.data("saving-text")||"Saving..."));const c={locale:d,parent_id:t||null,name:e};$.ajax({url:r,method:"POST",data:c,success:function(e){if(e.success&&e.data){const r=e.data.id,d=e.data.name;let c=0;if(t){const e=s.find(`input[name="${a}"][value="${CSS.escape(t)}"]`).closest(".form-check");c=(parseInt(e.css("margin-left"))||0)+20}const u=$("<div>",{class:"form-check",style:`margin-left: ${c}px;`}),f=$("<input>",{class:"form-check-input",type:"checkbox",name:a,value:r,id:`cat-${r}`,checked:!0}),h=$("<label>",{class:"form-check-label",for:`cat-${r}`}).text(d);if(u.append(f).append(h),t){const e=s.find(`input[name="${a}"][value="${CSS.escape(t)}"]`).closest(".form-check");let n=e;const i=parseInt(e.css("margin-left"))||0;e.nextAll(".form-check").each(function(){if((parseInt($(this).css("margin-left"))||0)<=i)return!1;n=$(this)}),n.after(u)}else s.append(u);const m=$("<option>",{value:r}).text(t?"-- "+d:d);if(t&&""!==t){const e=l.find("option").filter(function(){return $(this).val()===String(t)});let a=e;e.nextAll("option").each(function(){if(!$(this).text().startsWith("-- "))return!1;a=$(this)}),a.after(m)}else l.append(m);o.val(""),l.val(""),n.prop("disabled",!1).html(i),e.message&&show_notify(e)}},error:function(e){let t="An error occurred while creating the category";e.responseJSON&&e.responseJSON.message&&(t=e.responseJSON.message),alert(t),n.prop("disabled",!1).html(i)}})}),o.on("keypress",function(e){13===e.which&&(e.preventDefault(),n.click())})})}function sendDataTablesActionRequest(e,t,a){$.ajax({type:"POST",url:e,dataType:"json",data:{ids:t,action:a},beforeSend:function(){toggle_global_loading(!0)},success:function(e){return e.window_redirect?(show_notify(e),window.location=e.window_redirect,!1):e.redirect?(show_notify(e),setTimeout(function(){window.location=e.redirect},1e3),!1):(toggle_global_loading(!1),$("#select-all").prop("checked",!1),$(".jw-datatable-bulk-actions .dropdown-toggle").prop("disabled",!0),void $("#jw-datatable").DataTable().draw())},error:function(e){toggle_global_loading(!1),show_notify(e)},complete:function(){toggle_global_loading(!1)}})}!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("jquery")):"function"==typeof define&&define.amd?define(["exports","jquery"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).adminlte={},e.jQuery)}(this,function(e,t){"use strict";var a=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(t),n="CardRefresh",i="lte.cardrefresh",o=a.default.fn[n],l='[data-card-widget="card-refresh"]',s={source:"",sourceSelector:"",params:{},trigger:l,content:".card-body",loadInContent:!0,loadOnInit:!0,loadErrorTemplate:!0,responseType:"",overlayTemplate:'<div class="overlay"><i class="fas fa-2x fa-sync-alt fa-spin"></i></div>',errorTemplate:'<span class="text-danger"></span>',onLoadStart:function(){},onLoadDone:function(e){return e},onLoadFail:function(e,t,a){}},r=function(){function e(e,t){if(this._element=e,this._parent=e.parents(".card").first(),this._settings=a.default.extend({},s,t),this._overlay=a.default(this._settings.overlayTemplate),e.hasClass("card")&&(this._parent=e),""===this._settings.source)throw new Error("Source url was not defined. Please specify a url in your CardRefresh source option.")}var t=e.prototype;return t.load=function(){var e=this;this._addOverlay(),this._settings.onLoadStart.call(a.default(this)),a.default.get(this._settings.source,this._settings.params,function(t){e._settings.loadInContent&&(""!==e._settings.sourceSelector&&(t=a.default(t).find(e._settings.sourceSelector).html()),e._parent.find(e._settings.content).html(t)),e._settings.onLoadDone.call(a.default(e),t),e._removeOverlay()},""!==this._settings.responseType&&this._settings.responseType).fail(function(t,n,i){if(e._removeOverlay(),e._settings.loadErrorTemplate){var o=a.default(e._settings.errorTemplate).text(i);e._parent.find(e._settings.content).empty().append(o)}e._settings.onLoadFail.call(a.default(e),t,n,i)}),a.default(this._element).trigger(a.default.Event("loaded.lte.cardrefresh"))},t._addOverlay=function(){this._parent.append(this._overlay),a.default(this._element).trigger(a.default.Event("overlay.added.lte.cardrefresh"))},t._removeOverlay=function(){this._parent.find(this._overlay).remove(),a.default(this._element).trigger(a.default.Event("overlay.removed.lte.cardrefresh"))},t._init=function(){var e=this;a.default(this).find(this._settings.trigger).on("click",function(){e.load()}),this._settings.loadOnInit&&this.load()},e._jQueryInterface=function(t){var n=a.default(this).data(i),o=a.default.extend({},s,a.default(this).data());n||(n=new e(a.default(this),o),a.default(this).data(i,"string"==typeof t?n:t)),"string"==typeof t&&/load/.test(t)?n[t]():n._init(a.default(this))},e}();a.default(document).on("click",l,function(e){e&&e.preventDefault(),r._jQueryInterface.call(a.default(this),"load")}),a.default(function(){a.default(l).each(function(){r._jQueryInterface.call(a.default(this))})}),a.default.fn[n]=r._jQueryInterface,a.default.fn[n].Constructor=r,a.default.fn[n].noConflict=function(){return a.default.fn[n]=o,r._jQueryInterface};var d="CardWidget",c="lte.cardwidget",u=a.default.fn[d],f="collapsed-card",h="collapsing-card",m="expanding-card",p="was-collapsed",g="maximized-card",b='[data-card-widget="remove"]',v='[data-card-widget="collapse"]',w='[data-card-widget="maximize"]',_={animationSpeed:"normal",collapseTrigger:v,removeTrigger:b,maximizeTrigger:w,collapseIcon:"fa-minus",expandIcon:"fa-plus",maximizeIcon:"fa-expand",minimizeIcon:"fa-compress"},y=function(){function e(e,t){this._element=e,this._parent=e.parents(".card").first(),e.hasClass("card")&&(this._parent=e),this._settings=a.default.extend({},_,t)}var t=e.prototype;return t.collapse=function(){var e=this;this._parent.addClass(h).children(".card-body, .card-footer").slideUp(this._settings.animationSpeed,function(){e._parent.addClass(f).removeClass(h)}),this._parent.find("> .card-header "+this._settings.collapseTrigger+" ."+this._settings.collapseIcon).addClass(this._settings.expandIcon).removeClass(this._settings.collapseIcon),this._element.trigger(a.default.Event("collapsed.lte.cardwidget"),this._parent)},t.expand=function(){var e=this;this._parent.addClass(m).children(".card-body, .card-footer").slideDown(this._settings.animationSpeed,function(){e._parent.removeClass(f).removeClass(m)}),this._parent.find("> .card-header "+this._settings.collapseTrigger+" ."+this._settings.expandIcon).addClass(this._settings.collapseIcon).removeClass(this._settings.expandIcon),this._element.trigger(a.default.Event("expanded.lte.cardwidget"),this._parent)},t.remove=function(){this._parent.slideUp(),this._element.trigger(a.default.Event("removed.lte.cardwidget"),this._parent)},t.toggle=function(){this._parent.hasClass(f)?this.expand():this.collapse()},t.maximize=function(){this._parent.find(this._settings.maximizeTrigger+" ."+this._settings.maximizeIcon).addClass(this._settings.minimizeIcon).removeClass(this._settings.maximizeIcon),this._parent.css({height:this._parent.height(),width:this._parent.width(),transition:"all .15s"}).delay(150).queue(function(){var e=a.default(this);e.addClass(g),a.default("html").addClass(g),e.hasClass(f)&&e.addClass(p),e.dequeue()}),this._element.trigger(a.default.Event("maximized.lte.cardwidget"),this._parent)},t.minimize=function(){this._parent.find(this._settings.maximizeTrigger+" ."+this._settings.minimizeIcon).addClass(this._settings.maximizeIcon).removeClass(this._settings.minimizeIcon),this._parent.css("cssText","height: "+this._parent[0].style.height+" !important; width: "+this._parent[0].style.width+" !important; transition: all .15s;").delay(10).queue(function(){var e=a.default(this);e.removeClass(g),a.default("html").removeClass(g),e.css({height:"inherit",width:"inherit"}),e.hasClass(p)&&e.removeClass(p),e.dequeue()}),this._element.trigger(a.default.Event("minimized.lte.cardwidget"),this._parent)},t.toggleMaximize=function(){this._parent.hasClass(g)?this.minimize():this.maximize()},t._init=function(e){var t=this;this._parent=e,a.default(this).find(this._settings.collapseTrigger).click(function(){t.toggle()}),a.default(this).find(this._settings.maximizeTrigger).click(function(){t.toggleMaximize()}),a.default(this).find(this._settings.removeTrigger).click(function(){t.remove()})},e._jQueryInterface=function(t){var n=a.default(this).data(c),i=a.default.extend({},_,a.default(this).data());n||(n=new e(a.default(this),i),a.default(this).data(c,"string"==typeof t?n:t)),"string"==typeof t&&/collapse|expand|remove|toggle|maximize|minimize|toggleMaximize/.test(t)?n[t]():"object"==typeof t&&n._init(a.default(this))},e}();a.default(document).on("click",v,function(e){e&&e.preventDefault(),y._jQueryInterface.call(a.default(this),"toggle")}),a.default(document).on("click",b,function(e){e&&e.preventDefault(),y._jQueryInterface.call(a.default(this),"remove")}),a.default(document).on("click",w,function(e){e&&e.preventDefault(),y._jQueryInterface.call(a.default(this),"toggleMaximize")}),a.default.fn[d]=y._jQueryInterface,a.default.fn[d].Constructor=y,a.default.fn[d].noConflict=function(){return a.default.fn[d]=u,y._jQueryInterface};var $="ControlSidebar",C="lte.controlsidebar",x=a.default.fn[$],k=".control-sidebar",j=".control-sidebar-content",T='[data-widget="control-sidebar"]',I=".main-header",S=".main-footer",z="control-sidebar-animate",E="control-sidebar-open",D="control-sidebar-slide-open",F="layout-fixed",H={controlsidebarSlide:!0,scrollbarTheme:"os-theme-light",scrollbarAutoHide:"l",target:k,animationSpeed:300},A=function(){function e(e,t){this._element=e,this._config=t}var t=e.prototype;return t.collapse=function(){var e=this,t=a.default("body"),n=a.default("html");this._config.controlsidebarSlide?(n.addClass(z),t.removeClass(D).delay(300).queue(function(){a.default(k).hide(),n.removeClass(z),a.default(this).dequeue()})):t.removeClass(E),a.default(this._element).trigger(a.default.Event("collapsed.lte.controlsidebar")),setTimeout(function(){a.default(e._element).trigger(a.default.Event("collapsed-done.lte.controlsidebar"))},this._config.animationSpeed)},t.show=function(e){void 0===e&&(e=!1);var t=a.default("body"),n=a.default("html");e&&a.default(k).hide(),this._config.controlsidebarSlide?(n.addClass(z),a.default(this._config.target).show().delay(10).queue(function(){t.addClass(D).delay(300).queue(function(){n.removeClass(z),a.default(this).dequeue()}),a.default(this).dequeue()})):t.addClass(E),this._fixHeight(),this._fixScrollHeight(),a.default(this._element).trigger(a.default.Event("expanded.lte.controlsidebar"))},t.toggle=function(){var e=a.default("body"),t=this._config.target,n=!a.default(t).is(":visible"),i=e.hasClass(E)||e.hasClass(D),o=n&&(e.hasClass(E)||e.hasClass(D));n||o?this.show(n):i&&this.collapse()},t._init=function(){var e=this,t=a.default("body");t.hasClass(E)||t.hasClass(D)?(a.default(k).not(this._config.target).hide(),a.default(this._config.target).css("display","block")):a.default(k).hide(),this._fixHeight(),this._fixScrollHeight(),a.default(window).resize(function(){e._fixHeight(),e._fixScrollHeight()}),a.default(window).scroll(function(){var t=a.default("body");(t.hasClass(E)||t.hasClass(D))&&e._fixScrollHeight()})},t._isNavbarFixed=function(){var e=a.default("body");return e.hasClass("layout-navbar-fixed")||e.hasClass("layout-sm-navbar-fixed")||e.hasClass("layout-md-navbar-fixed")||e.hasClass("layout-lg-navbar-fixed")||e.hasClass("layout-xl-navbar-fixed")},t._isFooterFixed=function(){var e=a.default("body");return e.hasClass("layout-footer-fixed")||e.hasClass("layout-sm-footer-fixed")||e.hasClass("layout-md-footer-fixed")||e.hasClass("layout-lg-footer-fixed")||e.hasClass("layout-xl-footer-fixed")},t._fixScrollHeight=function(){var e=a.default("body"),t=a.default(this._config.target);if(e.hasClass(F)){var n={scroll:a.default(document).height(),window:a.default(window).height(),header:a.default(I).outerHeight(),footer:a.default(S).outerHeight()},i=Math.abs(n.window+a.default(window).scrollTop()-n.scroll),o=a.default(window).scrollTop(),l=this._isNavbarFixed()&&"fixed"===a.default(I).css("position"),s=this._isFooterFixed()&&"fixed"===a.default(S).css("position"),r=a.default(this._config.target+", "+this._config.target+" "+j);if(0===o&&0===i)t.css({bottom:n.footer,top:n.header}),r.css("height",n.window-(n.header+n.footer));else if(i<=n.footer)if(!1===s){var d=n.header-o;t.css("bottom",n.footer-i).css("top",d>=0?d:0),r.css("height",n.window-(n.footer-i))}else t.css("bottom",n.footer);else o<=n.header?!1===l?(t.css("top",n.header-o),r.css("height",n.window-(n.header-o))):t.css("top",n.header):!1===l?(t.css("top",0),r.css("height",n.window)):t.css("top",n.header);s&&l?(r.css("height","100%"),t.css("height","")):(s||l)&&(r.css("height","100%"),r.css("height",""))}},t._fixHeight=function(){var e=a.default("body"),t=a.default(this._config.target+" "+j);if(e.hasClass(F)){var n=a.default(window).height(),i=a.default(I).outerHeight(),o=a.default(S).outerHeight(),l=n-i;this._isFooterFixed()&&"fixed"===a.default(S).css("position")&&(l=n-i-o),t.css("height",l),void 0!==a.default.fn.overlayScrollbars&&t.overlayScrollbars({className:this._config.scrollbarTheme,sizeAutoCapable:!0,scrollbars:{autoHide:this._config.scrollbarAutoHide,clickScrolling:!0}})}else t.attr("style","")},e._jQueryInterface=function(t){return this.each(function(){var n=a.default(this).data(C),i=a.default.extend({},H,a.default(this).data());if(n||(n=new e(this,i),a.default(this).data(C,n)),"undefined"===n[t])throw new Error(t+" is not a function");n[t]()})},e}();a.default(document).on("click",T,function(e){e.preventDefault(),A._jQueryInterface.call(a.default(this),"toggle")}),a.default(document).ready(function(){A._jQueryInterface.call(a.default(T),"_init")}),a.default.fn[$]=A._jQueryInterface,a.default.fn[$].Constructor=A,a.default.fn[$].noConflict=function(){return a.default.fn[$]=x,A._jQueryInterface};var Q="DirectChat",O="lte.directchat",M=a.default.fn[Q],R=function(){function e(e){this._element=e}return e.prototype.toggle=function(){a.default(this._element).parents(".direct-chat").first().toggleClass("direct-chat-contacts-open"),a.default(this._element).trigger(a.default.Event("toggled.lte.directchat"))},e._jQueryInterface=function(t){return this.each(function(){var n=a.default(this).data(O);n||(n=new e(a.default(this)),a.default(this).data(O,n)),n[t]()})},e}();a.default(document).on("click",'[data-widget="chat-pane-toggle"]',function(e){e&&e.preventDefault(),R._jQueryInterface.call(a.default(this),"toggle")}),a.default.fn[Q]=R._jQueryInterface,a.default.fn[Q].Constructor=R,a.default.fn[Q].noConflict=function(){return a.default.fn[Q]=M,R._jQueryInterface};var L="Dropdown",q="lte.dropdown",U=a.default.fn[L],N={},P=function(){function e(e,t){this._config=t,this._element=e}var t=e.prototype;return t.toggleSubmenu=function(){this._element.siblings().show().toggleClass("show"),this._element.next().hasClass("show")||this._element.parents(".dropdown-menu").first().find(".show").removeClass("show").hide(),this._element.parents("li.nav-item.dropdown.show").on("hidden.bs.dropdown",function(){a.default(".dropdown-submenu .show").removeClass("show").hide()})},t.fixPosition=function(){var e=a.default(".dropdown-menu.show");if(0!==e.length){e.hasClass("dropdown-menu-right")?e.css({left:"inherit",right:0}):e.css({left:0,right:"inherit"});var t=e.offset(),n=e.width(),i=a.default(window).width()-t.left;t.left<0?e.css({left:"inherit",right:t.left-5}):i<n&&e.css({left:"inherit",right:0})}},e._jQueryInterface=function(t){return this.each(function(){var n=a.default(this).data(q),i=a.default.extend({},N,a.default(this).data());n||(n=new e(a.default(this),i),a.default(this).data(q,n)),"toggleSubmenu"!==t&&"fixPosition"!==t||n[t]()})},e}();a.default('.dropdown-menu [data-toggle="dropdown"]').on("click",function(e){e.preventDefault(),e.stopPropagation(),P._jQueryInterface.call(a.default(this),"toggleSubmenu")}),a.default('.navbar [data-toggle="dropdown"]').on("click",function(e){e.preventDefault(),a.default(e.target).parent().hasClass("dropdown-submenu")||setTimeout(function(){P._jQueryInterface.call(a.default(this),"fixPosition")},1)}),a.default.fn[L]=P._jQueryInterface,a.default.fn[L].Constructor=P,a.default.fn[L].noConflict=function(){return a.default.fn[L]=U,P._jQueryInterface};var B="ExpandableTable",J="lte.expandableTable",Y=a.default.fn[B],W=".expandable-body",G='[data-widget="expandable-table"]',K="aria-expanded",V=function(){function e(e,t){this._options=t,this._element=e}var t=e.prototype;return t.init=function(){a.default(G).each(function(e,t){var n=a.default(t).attr(K),i=a.default(t).next(W).children().first().children();"true"===n?i.show():"false"===n&&(i.hide(),i.parent().parent().addClass("d-none"))})},t.toggleRow=function(){var e=this._element;"TR"!==e[0].nodeName&&"TR"!==(e=e.parent())[0].nodeName&&(e=e.parent());var t=e.attr(K),n=e.next(W).children().first().children();n.stop(),"true"===t?(n.slideUp(500,function(){e.next(W).addClass("d-none")}),e.attr(K,"false"),e.trigger(a.default.Event("collapsed.lte.expandableTable"))):"false"===t&&(e.next(W).removeClass("d-none"),n.slideDown(500),e.attr(K,"true"),e.trigger(a.default.Event("expanded.lte.expandableTable")))},e._jQueryInterface=function(t){return this.each(function(){var n=a.default(this).data(J);n||(n=new e(a.default(this)),a.default(this).data(J,n)),"string"==typeof t&&/init|toggleRow/.test(t)&&n[t]()})},e}();a.default(".expandable-table").ready(function(){V._jQueryInterface.call(a.default(this),"init")}),a.default(document).on("click",G,function(){V._jQueryInterface.call(a.default(this),"toggleRow")}),a.default.fn[B]=V._jQueryInterface,a.default.fn[B].Constructor=V,a.default.fn[B].noConflict=function(){return a.default.fn[B]=Y,V._jQueryInterface};var X="Fullscreen",Z="lte.fullscreen",ee=a.default.fn[X],te='[data-widget="fullscreen"]',ae=te+" i",ne={minimizeIcon:"fa-compress-arrows-alt",maximizeIcon:"fa-expand-arrows-alt"},ie=function(){function e(e,t){this.element=e,this.options=a.default.extend({},ne,t)}var t=e.prototype;return t.toggle=function(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?this.windowed():this.fullscreen()},t.toggleIcon=function(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?a.default(ae).removeClass(this.options.maximizeIcon).addClass(this.options.minimizeIcon):a.default(ae).removeClass(this.options.minimizeIcon).addClass(this.options.maximizeIcon)},t.fullscreen=function(){document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.webkitRequestFullscreen?document.documentElement.webkitRequestFullscreen():document.documentElement.msRequestFullscreen&&document.documentElement.msRequestFullscreen()},t.windowed=function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},e._jQueryInterface=function(t){var n=a.default(this).data(Z);n||(n=a.default(this).data());var i=a.default.extend({},ne,"object"==typeof t?t:n),o=new e(a.default(this),i);a.default(this).data(Z,"object"==typeof t?t:n),"string"==typeof t&&/toggle|toggleIcon|fullscreen|windowed/.test(t)?o[t]():o.init()},e}();a.default(document).on("click",te,function(){ie._jQueryInterface.call(a.default(this),"toggle")}),a.default(document).on("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",function(){ie._jQueryInterface.call(a.default(te),"toggleIcon")}),a.default.fn[X]=ie._jQueryInterface,a.default.fn[X].Constructor=ie,a.default.fn[X].noConflict=function(){return a.default.fn[X]=ee,ie._jQueryInterface};var oe="lte.iframe",le=a.default.fn.IFrame,se='[data-widget="iframe"]',re='[data-widget="iframe-fullscreen"]',de=".content-wrapper",ce=".content-wrapper iframe",ue=".content-wrapper.iframe-mode .nav",fe=".content-wrapper.iframe-mode .navbar-nav",he=fe+" .nav-item",me=fe+" .nav-link",pe=".content-wrapper.iframe-mode .tab-content",ge=pe+" .tab-empty",be=pe+" .tab-loading",ve=pe+" .tab-pane",we=".main-sidebar .nav-item > a.nav-link",_e=".main-header .nav-item a.nav-link",ye=".main-header a.dropdown-item",$e="iframe-mode",Ce="iframe-mode-fullscreen",xe={onTabClick:function(e){return e},onTabChanged:function(e){return e},onTabCreated:function(e){return e},autoIframeMode:!0,autoItemActive:!0,autoShowNewTab:!0,autoDarkMode:!1,allowDuplicates:!1,allowReload:!0,loadingScreen:!0,useNavbarItems:!0,scrollOffset:40,scrollBehaviorSwap:!1,iconMaximize:"fa-expand",iconMinimize:"fa-compress"},ke=function(){function e(e,t){this._config=t,this._element=e,this._init()}var t=e.prototype;return t.onTabClick=function(e){this._config.onTabClick(e)},t.onTabChanged=function(e){this._config.onTabChanged(e)},t.onTabCreated=function(e){this._config.onTabCreated(e)},t.createTab=function(e,t,n,i){var o=this,l="panel-"+n,s="tab-"+n;this._config.allowDuplicates&&(l+="-"+Math.floor(1e3*Math.random()),s+="-"+Math.floor(1e3*Math.random()));var r='<li class="nav-item" role="presentation"><a href="#" class="btn-iframe-close" data-widget="iframe-close" data-type="only-this"><i class="fas fa-times"></i></a><a class="nav-link" data-toggle="row" id="'+s+'" href="#'+l+'" role="tab" aria-controls="'+l+'" aria-selected="false">'+e+"</a></li>";a.default(fe).append(unescape(escape(r)));var d='<div class="tab-pane fade" id="'+l+'" role="tabpanel" aria-labelledby="'+s+'"><iframe src="'+t+'"></iframe></div>';if(a.default(pe).append(unescape(escape(d))),i)if(this._config.loadingScreen){var c=a.default(be);c.fadeIn(),a.default(l+" iframe").ready(function(){"number"==typeof o._config.loadingScreen?(o.switchTab("#"+s),setTimeout(function(){c.fadeOut()},o._config.loadingScreen)):(o.switchTab("#"+s),c.fadeOut())})}else this.switchTab("#"+s);this.onTabCreated(a.default("#"+s))},t.openTabSidebar=function(e,t){void 0===t&&(t=this._config.autoShowNewTab);var n=a.default(e).clone();void 0===n.attr("href")&&(n=a.default(e).parent("a").clone()),n.find(".right, .search-path").remove();var i=n.find("p").text();""===i&&(i=n.text());var o=n.attr("href");if("#"!==o&&""!==o&&void 0!==o){var l=unescape(o).replace("./","").replace(/["#&'./:=?[\]]/gi,"-").replace(/(--)/gi,""),s="tab-"+l;if(!this._config.allowDuplicates&&a.default("#"+s).length>0)return this.switchTab("#"+s,this._config.allowReload);(!this._config.allowDuplicates&&0===a.default("#"+s).length||this._config.allowDuplicates)&&this.createTab(i,o,l,t)}},t.switchTab=function(e,t){var n=this;void 0===t&&(t=!1);var i=a.default(e),o=i.attr("href");if(a.default(ge).hide(),t){var l=a.default(be);this._config.loadingScreen?l.show(0,function(){a.default(o+" iframe").attr("src",a.default(o+" iframe").attr("src")).ready(function(){n._config.loadingScreen&&("number"==typeof n._config.loadingScreen?setTimeout(function(){l.fadeOut()},n._config.loadingScreen):l.fadeOut())})}):a.default(o+" iframe").attr("src",a.default(o+" iframe").attr("src"))}a.default(fe+" .active").tab("dispose").removeClass("active"),this._fixHeight(),i.tab("show"),i.parents("li").addClass("active"),this.onTabChanged(i),this._config.autoItemActive&&this._setItemActive(a.default(o+" iframe").attr("src"))},t.removeActiveTab=function(e,t){if("all"==e)a.default(he).remove(),a.default(ve).remove(),a.default(ge).show();else if("all-other"==e)a.default(he+":not(.active)").remove(),a.default(ve+":not(.active)").remove();else if("only-this"==e){var n=a.default(t),i=n.parent(".nav-item"),o=i.parent(),l=i.index(),s=n.siblings(".nav-link").attr("aria-controls");if(i.remove(),a.default("#"+s).remove(),a.default(pe).children().length==a.default(ge+", "+be).length)a.default(ge).show();else{var r=l-1;this.switchTab(o.children().eq(r).find("a.nav-link"))}}else{var d=a.default(he+".active"),c=d.parent(),u=d.index();if(d.remove(),a.default(ve+".active").remove(),a.default(pe).children().length==a.default(ge+", "+be).length)a.default(ge).show();else{var f=u-1;this.switchTab(c.children().eq(f).find("a.nav-link"))}}},t.toggleFullscreen=function(){a.default("body").hasClass(Ce)?(a.default(re+" i").removeClass(this._config.iconMinimize).addClass(this._config.iconMaximize),a.default("body").removeClass(Ce),a.default(ge+", "+be).height("100%"),a.default(de).height("100%"),a.default(ce).height("100%")):(a.default(re+" i").removeClass(this._config.iconMaximize).addClass(this._config.iconMinimize),a.default("body").addClass(Ce)),a.default(window).trigger("resize"),this._fixHeight(!0)},t._init=function(){var e=a.default(pe).children().length>2;if(this._setupListeners(),this._fixHeight(!0),e){var t=a.default(""+ve).first();console.log(t);var n="#tab-"+t.attr("id").replace("panel-","");this.switchTab(n,!0)}},t._initFrameElement=function(){if(window.frameElement&&this._config.autoIframeMode){var e=a.default("body");e.addClass($e),this._config.autoDarkMode&&e.addClass("dark-mode")}},t._navScroll=function(e){var t=a.default(fe).scrollLeft();a.default(fe).animate({scrollLeft:t+e},250,"linear")},t._setupListeners=function(){var e=this;a.default(window).on("resize",function(){setTimeout(function(){e._fixHeight()},1)}),a.default(de).hasClass($e)&&(a.default(document).on("click",we+", .sidebar-search-results .list-group-item",function(t){t.preventDefault(),e.openTabSidebar(t.target)}),this._config.useNavbarItems&&a.default(document).on("click",_e+", "+ye,function(t){t.preventDefault(),e.openTabSidebar(t.target)})),a.default(document).on("click",me,function(t){t.preventDefault(),e.onTabClick(t.target),e.switchTab(t.target)}),a.default(document).on("click",me,function(t){t.preventDefault(),e.onTabClick(t.target),e.switchTab(t.target)}),a.default(document).on("click",'[data-widget="iframe-close"]',function(t){t.preventDefault();var a=t.target;"I"==a.nodeName&&(a=t.target.offsetParent),e.removeActiveTab(a.attributes["data-type"]?a.attributes["data-type"].nodeValue:null,a)}),a.default(document).on("click",re,function(t){t.preventDefault(),e.toggleFullscreen()});var t=!1,n=null;a.default(document).on("mousedown",'[data-widget="iframe-scrollleft"]',function(a){a.preventDefault(),clearInterval(n);var i=e._config.scrollOffset;e._config.scrollBehaviorSwap||(i=-i),t=!0,e._navScroll(i),n=setInterval(function(){e._navScroll(i)},250)}),a.default(document).on("mousedown",'[data-widget="iframe-scrollright"]',function(a){a.preventDefault(),clearInterval(n);var i=e._config.scrollOffset;e._config.scrollBehaviorSwap&&(i=-i),t=!0,e._navScroll(i),n=setInterval(function(){e._navScroll(i)},250)}),a.default(document).on("mouseup",function(){t&&(t=!1,clearInterval(n),n=null)})},t._setItemActive=function(e){a.default(we+", "+ye).removeClass("active"),a.default(_e).parent().removeClass("active");var t=a.default(_e+'[href$="'+e+'"]'),n=a.default('.main-header a.dropdown-item[href$="'+e+'"]'),i=a.default(we+'[href$="'+e+'"]');t.each(function(e,t){a.default(t).parent().addClass("active")}),n.each(function(e,t){a.default(t).addClass("active")}),i.each(function(e,t){a.default(t).addClass("active"),a.default(t).parents(".nav-treeview").prevAll(".nav-link").addClass("active")})},t._fixHeight=function(e){if(void 0===e&&(e=!1),a.default("body").hasClass(Ce)){var t=a.default(window).height(),n=a.default(ue).outerHeight();a.default(ge+", "+be+", "+ce).height(t-n),a.default(de).height(t)}else{var i=parseFloat(a.default(de).css("height")),o=a.default(ue).outerHeight();1==e?setTimeout(function(){a.default(ge+", "+be).height(i-o)},50):a.default(ce).height(i-o)}},e._jQueryInterface=function(t){if(a.default(se).length>0){var n=a.default(this).data(oe);n||(n=a.default(this).data());var i=a.default.extend({},xe,"object"==typeof t?t:n);localStorage.setItem("AdminLTE:IFrame:Options",JSON.stringify(i));var o=new e(a.default(this),i);a.default(this).data(oe,"object"==typeof t?t:n),"string"==typeof t&&/createTab|openTabSidebar|switchTab|removeActiveTab/.test(t)&&o[t]()}else new e(a.default(this),JSON.parse(localStorage.getItem("AdminLTE:IFrame:Options")))._initFrameElement()},e}();a.default(window).on("load",function(){ke._jQueryInterface.call(a.default(se))}),a.default.fn.IFrame=ke._jQueryInterface,a.default.fn.IFrame.Constructor=ke,a.default.fn.IFrame.noConflict=function(){return a.default.fn.IFrame=le,ke._jQueryInterface};var je="lte.layout",Te=a.default.fn.Layout,Ie=".main-header",Se=".main-sidebar",ze=".main-sidebar .sidebar",Ee=".main-footer",De="sidebar-focused",Fe={scrollbarTheme:"os-theme-light",scrollbarAutoHide:"l",panelAutoHeight:!0,panelAutoHeightMode:"min-height",preloadDuration:200,loginRegisterAutoHeight:!0},He=function(){function e(e,t){this._config=t,this._element=e}var t=e.prototype;return t.fixLayoutHeight=function(e){void 0===e&&(e=null);var t=a.default("body"),n=0;(t.hasClass("control-sidebar-slide-open")||t.hasClass("control-sidebar-open")||"control_sidebar"===e)&&(n=a.default(".control-sidebar-content").outerHeight());var i={window:a.default(window).height(),header:a.default(Ie).length>0?a.default(Ie).outerHeight():0,footer:a.default(Ee).length>0?a.default(Ee).outerHeight():0,sidebar:a.default(ze).length>0?a.default(ze).height():0,controlSidebar:n},o=this._max(i),l=this._config.panelAutoHeight;!0===l&&(l=0);var s=a.default(".content-wrapper");!1!==l&&(o===i.controlSidebar?s.css(this._config.panelAutoHeightMode,o+l):o===i.window?s.css(this._config.panelAutoHeightMode,o+l-i.header-i.footer):s.css(this._config.panelAutoHeightMode,o+l-i.header),this._isFooterFixed()&&s.css(this._config.panelAutoHeightMode,parseFloat(s.css(this._config.panelAutoHeightMode))+i.footer)),t.hasClass("layout-fixed")&&(void 0!==a.default.fn.overlayScrollbars?a.default(ze).overlayScrollbars({className:this._config.scrollbarTheme,sizeAutoCapable:!0,scrollbars:{autoHide:this._config.scrollbarAutoHide,clickScrolling:!0}}):a.default(ze).css("overflow-y","auto"))},t.fixLoginRegisterHeight=function(){var e=a.default("body"),t=a.default(".login-box, .register-box");if(e.hasClass("iframe-mode"))e.css("height","100%"),a.default(".wrapper").css("height","100%"),a.default("html").css("height","100%");else if(0===t.length)e.css("height","auto"),a.default("html").css("height","auto");else{var n=t.height();e.css(this._config.panelAutoHeightMode)!==n&&e.css(this._config.panelAutoHeightMode,n)}},t._init=function(){var e=this;this.fixLayoutHeight(),!0===this._config.loginRegisterAutoHeight?this.fixLoginRegisterHeight():this._config.loginRegisterAutoHeight===parseInt(this._config.loginRegisterAutoHeight,10)&&setInterval(this.fixLoginRegisterHeight,this._config.loginRegisterAutoHeight),a.default(ze).on("collapsed.lte.treeview expanded.lte.treeview",function(){e.fixLayoutHeight()}),a.default(Se).on("mouseenter mouseleave",function(){a.default("body").hasClass("sidebar-collapse")&&e.fixLayoutHeight()}),a.default('[data-widget="pushmenu"]').on("collapsed.lte.pushmenu shown.lte.pushmenu",function(){setTimeout(function(){e.fixLayoutHeight()},300)}),a.default('[data-widget="control-sidebar"]').on("collapsed.lte.controlsidebar",function(){e.fixLayoutHeight()}).on("expanded.lte.controlsidebar",function(){e.fixLayoutHeight("control_sidebar")}),a.default(window).resize(function(){e.fixLayoutHeight()}),setTimeout(function(){a.default("body.hold-transition").removeClass("hold-transition")},50),setTimeout(function(){var e=a.default(".preloader");e&&(e.css("height",0),setTimeout(function(){e.children().hide()},200))},this._config.preloadDuration)},t._max=function(e){var t=0;return Object.keys(e).forEach(function(a){e[a]>t&&(t=e[a])}),t},t._isFooterFixed=function(){return"fixed"===a.default(Ee).css("position")},e._jQueryInterface=function(t){return void 0===t&&(t=""),this.each(function(){var n=a.default(this).data(je),i=a.default.extend({},Fe,a.default(this).data());n||(n=new e(a.default(this),i),a.default(this).data(je,n)),"init"===t||""===t?n._init():"fixLayoutHeight"!==t&&"fixLoginRegisterHeight"!==t||n[t]()})},e}();a.default(window).on("load",function(){He._jQueryInterface.call(a.default("body"))}),a.default(ze+" a").on("focusin",function(){a.default(Se).addClass(De)}).on("focusout",function(){a.default(Se).removeClass(De)}),a.default.fn.Layout=He._jQueryInterface,a.default.fn.Layout.Constructor=He,a.default.fn.Layout.noConflict=function(){return a.default.fn.Layout=Te,He._jQueryInterface};var Ae="PushMenu",Qe="lte.pushmenu",Oe="."+Qe,Me=a.default.fn[Ae],Re='[data-widget="pushmenu"]',Le="body",qe="sidebar-collapse",Ue="sidebar-open",Ne="sidebar-is-opening",Pe="sidebar-closed",Be={autoCollapseSize:992,enableRemember:!1,noTransitionAfterReload:!0,animationSpeed:300},Je=function(){function e(e,t){this._element=e,this._options=a.default.extend({},Be,t),0===a.default("#sidebar-overlay").length&&this._addOverlay(),this._init()}var t=e.prototype;return t.expand=function(){var e=a.default(Le);this._options.autoCollapseSize&&a.default(window).width()<=this._options.autoCollapseSize&&e.addClass(Ue),e.addClass(Ne).removeClass("sidebar-collapse sidebar-closed").delay(50).queue(function(){e.removeClass(Ne),a.default(this).dequeue()}),this._options.enableRemember&&localStorage.setItem("remember"+Oe,Ue),a.default(this._element).trigger(a.default.Event("shown.lte.pushmenu"))},t.collapse=function(){var e=this,t=a.default(Le);this._options.autoCollapseSize&&a.default(window).width()<=this._options.autoCollapseSize&&t.removeClass(Ue).addClass(Pe),t.addClass(qe),this._options.enableRemember&&localStorage.setItem("remember"+Oe,qe),a.default(this._element).trigger(a.default.Event("collapsed.lte.pushmenu")),setTimeout(function(){a.default(e._element).trigger(a.default.Event("collapsed-done.lte.pushmenu"))},this._options.animationSpeed)},t.toggle=function(){a.default(Le).hasClass(qe)?this.expand():this.collapse()},t.autoCollapse=function(e){if(void 0===e&&(e=!1),this._options.autoCollapseSize){var t=a.default(Le);a.default(window).width()<=this._options.autoCollapseSize?t.hasClass(Ue)||this.collapse():!0===e&&(t.hasClass(Ue)?t.removeClass(Ue):t.hasClass(Pe)&&this.expand())}},t.remember=function(){if(this._options.enableRemember){var e=a.default("body");localStorage.getItem("remember"+Oe)===qe?this._options.noTransitionAfterReload?e.addClass("hold-transition").addClass(qe).delay(50).queue(function(){a.default(this).removeClass("hold-transition"),a.default(this).dequeue()}):e.addClass(qe):this._options.noTransitionAfterReload?e.addClass("hold-transition").removeClass(qe).delay(50).queue(function(){a.default(this).removeClass("hold-transition"),a.default(this).dequeue()}):e.removeClass(qe)}},t._init=function(){var e=this;this.remember(),this.autoCollapse(),a.default(window).resize(function(){e.autoCollapse(!0)})},t._addOverlay=function(){var e=this,t=a.default("<div />",{id:"sidebar-overlay"});t.on("click",function(){e.collapse()}),a.default(".wrapper").append(t)},e._jQueryInterface=function(t){return this.each(function(){var n=a.default(this).data(Qe),i=a.default.extend({},Be,a.default(this).data());n||(n=new e(this,i),a.default(this).data(Qe,n)),"string"==typeof t&&/collapse|expand|toggle/.test(t)&&n[t]()})},e}();a.default(document).on("click",Re,function(e){e.preventDefault();var t=e.currentTarget;"pushmenu"!==a.default(t).data("widget")&&(t=a.default(t).closest(Re)),Je._jQueryInterface.call(a.default(t),"toggle")}),a.default(window).on("load",function(){Je._jQueryInterface.call(a.default(Re))}),a.default.fn[Ae]=Je._jQueryInterface,a.default.fn[Ae].Constructor=Je,a.default.fn[Ae].noConflict=function(){return a.default.fn[Ae]=Me,Je._jQueryInterface};var Ye="SidebarSearch",We="lte.sidebar-search",Ge=a.default.fn[Ye],Ke="sidebar-search-open",Ve="fa-search",Xe="fa-times",Ze='[data-widget="sidebar-search"]',et=Ze+" .form-control",tt=Ze+" .btn",at=tt+" i",nt=".sidebar-search-results",it=".sidebar-search-results .list-group",ot={arrowSign:"->",minLength:3,maxResults:7,highlightName:!0,highlightPath:!1,highlightClass:"text-light",notFoundText:"No element found!"},lt=[],st=function(){function e(e,t){this.element=e,this.options=a.default.extend({},ot,t),this.items=[]}var n=e.prototype;return n.init=function(){var e=this;0!==a.default(Ze).length&&(0===a.default(Ze).next(nt).length&&a.default(Ze).after(a.default("<div />",{class:"sidebar-search-results"})),0===a.default(nt).children(".list-group").length&&a.default(nt).append(a.default("<div />",{class:"list-group"})),this._addNotFound(),a.default(".main-sidebar .nav-sidebar").children().each(function(t,a){e._parseItem(a)}))},n.search=function(){var e=this,t=a.default(et).val().toLowerCase();if(t.length<this.options.minLength)return a.default(it).empty(),this._addNotFound(),void this.close();var n=lt.filter(function(e){return e.name.toLowerCase().includes(t)}),i=a.default(n.slice(0,this.options.maxResults));a.default(it).empty(),0===i.length?this._addNotFound():i.each(function(t,n){a.default(it).append(e._renderItem(escape(n.name),encodeURI(n.link),n.path))}),this.open()},n.open=function(){a.default(Ze).parent().addClass(Ke),a.default(at).removeClass(Ve).addClass(Xe)},n.close=function(){a.default(Ze).parent().removeClass(Ke),a.default(at).removeClass(Xe).addClass(Ve)},n.toggle=function(){a.default(Ze).parent().hasClass(Ke)?this.close():this.open()},n._parseItem=function(e,t){var n=this;if(void 0===t&&(t=[]),!a.default(e).hasClass("nav-header")){var i={},o=a.default(e).clone().find("> .nav-link"),l=a.default(e).clone().find("> .nav-treeview"),s=o.attr("href"),r=o.find("p").children().remove().end().text();if(i.name=this._trimText(r),i.link=s,i.path=t,0===l.length)lt.push(i);else{var d=i.path.concat([i.name]);l.children().each(function(e,t){n._parseItem(t,d)})}}},n._trimText=function(e){return t.trim(e.replace(/(\r\n|\n|\r)/gm," "))},n._renderItem=function(e,t,n){var i=this;if(n=n.join(" "+this.options.arrowSign+" "),e=unescape(e),t=decodeURI(t),this.options.highlightName||this.options.highlightPath){var o=a.default(et).val().toLowerCase(),l=new RegExp(o,"gi");this.options.highlightName&&(e=e.replace(l,function(e){return'<strong class="'+i.options.highlightClass+'">'+e+"</strong>"})),this.options.highlightPath&&(n=n.replace(l,function(e){return'<strong class="'+i.options.highlightClass+'">'+e+"</strong>"}))}var s=a.default("<a/>",{href:decodeURIComponent(t),class:"list-group-item"}),r=a.default("<div/>",{class:"search-title"}).html(e),d=a.default("<div/>",{class:"search-path"}).html(n);return s.append(r).append(d),s},n._addNotFound=function(){a.default(it).append(this._renderItem(this.options.notFoundText,"#",[]))},e._jQueryInterface=function(t){var n=a.default(this).data(We);n||(n=a.default(this).data());var i=a.default.extend({},ot,"object"==typeof t?t:n),o=new e(a.default(this),i);a.default(this).data(We,"object"==typeof t?t:n),"string"==typeof t&&/init|toggle|close|open|search/.test(t)?o[t]():o.init()},e}();a.default(document).on("click",tt,function(e){e.preventDefault(),st._jQueryInterface.call(a.default(Ze),"toggle")}),a.default(document).on("keyup",et,function(e){return 38==e.keyCode?(e.preventDefault(),void a.default(it).children().last().focus()):40==e.keyCode?(e.preventDefault(),void a.default(it).children().first().focus()):void setTimeout(function(){st._jQueryInterface.call(a.default(Ze),"search")},100)}),a.default(document).on("keydown",it,function(e){var t=a.default(":focus");38==e.keyCode&&(e.preventDefault(),t.is(":first-child")?t.siblings().last().focus():t.prev().focus()),40==e.keyCode&&(e.preventDefault(),t.is(":last-child")?t.siblings().first().focus():t.next().focus())}),a.default(window).on("load",function(){st._jQueryInterface.call(a.default(Ze),"init")}),a.default.fn[Ye]=st._jQueryInterface,a.default.fn[Ye].Constructor=st,a.default.fn[Ye].noConflict=function(){return a.default.fn[Ye]=Ge,st._jQueryInterface};var rt="NavbarSearch",dt="lte.navbar-search",ct=a.default.fn[rt],ut='[data-widget="navbar-search"]',ft=".form-control",ht="navbar-search-open",mt={resetOnClose:!0,target:".navbar-search-block"},pt=function(){function e(e,t){this._element=e,this._config=a.default.extend({},mt,t)}var t=e.prototype;return t.open=function(){a.default(this._config.target).css("display","flex").hide().fadeIn().addClass(ht),a.default(this._config.target+" "+ft).focus()},t.close=function(){a.default(this._config.target).fadeOut().removeClass(ht),this._config.resetOnClose&&a.default(this._config.target+" "+ft).val("")},t.toggle=function(){a.default(this._config.target).hasClass(ht)?this.close():this.open()},e._jQueryInterface=function(t){return this.each(function(){var n=a.default(this).data(dt),i=a.default.extend({},mt,a.default(this).data());if(n||(n=new e(this,i),a.default(this).data(dt,n)),!/toggle|close|open/.test(t))throw new Error("Undefined method "+t);n[t]()})},e}();a.default(document).on("click",ut,function(e){e.preventDefault();var t=a.default(e.currentTarget);"navbar-search"!==t.data("widget")&&(t=t.closest(ut)),pt._jQueryInterface.call(t,"toggle")}),a.default.fn[rt]=pt._jQueryInterface,a.default.fn[rt].Constructor=pt,a.default.fn[rt].noConflict=function(){return a.default.fn[rt]=ct,pt._jQueryInterface};var gt=a.default.fn.Toasts,bt="topRight",vt="topLeft",wt="bottomRight",_t="bottomLeft",yt={position:bt,fixed:!0,autohide:!1,autoremove:!0,delay:1e3,fade:!0,icon:null,image:null,imageAlt:null,imageHeight:"25px",title:null,subtitle:null,close:!0,body:null,class:null},$t=function(){function e(e,t){this._config=t,this._prepareContainer(),a.default("body").trigger(a.default.Event("init.lte.toasts"))}var t=e.prototype;return t.create=function(){var e=a.default('<div class="toast" role="alert" aria-live="assertive" aria-atomic="true"/>');e.data("autohide",this._config.autohide),e.data("animation",this._config.fade),this._config.class&&e.addClass(this._config.class),this._config.delay&&500!=this._config.delay&&e.data("delay",this._config.delay);var t=a.default('<div class="toast-header">');if(null!=this._config.image){var n=a.default("<img />").addClass("rounded mr-2").attr("src",this._config.image).attr("alt",this._config.imageAlt);null!=this._config.imageHeight&&n.height(this._config.imageHeight).width("auto"),t.append(n)}if(null!=this._config.icon&&t.append(a.default("<i />").addClass("mr-2").addClass(this._config.icon)),null!=this._config.title&&t.append(a.default("<strong />").addClass("mr-auto").html(this._config.title)),null!=this._config.subtitle&&t.append(a.default("<small />").html(this._config.subtitle)),1==this._config.close){var i=a.default('<button data-dismiss="toast" />').attr("type","button").addClass("ml-2 mb-1 close").attr("aria-label","Close").append('<span aria-hidden="true">&times;</span>');null==this._config.title&&i.toggleClass("ml-2 ml-auto"),t.append(i)}e.append(t),null!=this._config.body&&e.append(a.default('<div class="toast-body" />').html(this._config.body)),a.default(this._getContainerId()).prepend(e);var o=a.default("body");o.trigger(a.default.Event("created.lte.toasts")),e.toast("show"),this._config.autoremove&&e.on("hidden.bs.toast",function(){a.default(this).delay(200).remove(),o.trigger(a.default.Event("removed.lte.toasts"))})},t._getContainerId=function(){return this._config.position==bt?"#toastsContainerTopRight":this._config.position==vt?"#toastsContainerTopLeft":this._config.position==wt?"#toastsContainerBottomRight":this._config.position==_t?"#toastsContainerBottomLeft":void 0},t._prepareContainer=function(){if(0===a.default(this._getContainerId()).length){var e=a.default("<div />").attr("id",this._getContainerId().replace("#",""));this._config.position==bt?e.addClass("toasts-top-right"):this._config.position==vt?e.addClass("toasts-top-left"):this._config.position==wt?e.addClass("toasts-bottom-right"):this._config.position==_t&&e.addClass("toasts-bottom-left"),a.default("body").append(e)}this._config.fixed?a.default(this._getContainerId()).addClass("fixed"):a.default(this._getContainerId()).removeClass("fixed")},e._jQueryInterface=function(t,n){return this.each(function(){var i=a.default.extend({},yt,n),o=new e(a.default(this),i);"create"===t&&o[t]()})},e}();a.default.fn.Toasts=$t._jQueryInterface,a.default.fn.Toasts.Constructor=$t,a.default.fn.Toasts.noConflict=function(){return a.default.fn.Toasts=gt,$t._jQueryInterface};var Ct="TodoList",xt="lte.todolist",kt=a.default.fn[Ct],jt="done",Tt={onCheck:function(e){return e},onUnCheck:function(e){return e}},It=function(){function e(e,t){this._config=t,this._element=e,this._init()}var t=e.prototype;return t.toggle=function(e){e.parents("li").toggleClass(jt),a.default(e).prop("checked")?this.check(e):this.unCheck(a.default(e))},t.check=function(e){this._config.onCheck.call(e)},t.unCheck=function(e){this._config.onUnCheck.call(e)},t._init=function(){var e=this,t=this._element;t.find("input:checkbox:checked").parents("li").toggleClass(jt),t.on("change","input:checkbox",function(t){e.toggle(a.default(t.target))})},e._jQueryInterface=function(t){return this.each(function(){var n=a.default(this).data(xt);n||(n=a.default(this).data());var i=a.default.extend({},Tt,"object"==typeof t?t:n),o=new e(a.default(this),i);a.default(this).data(xt,"object"==typeof t?t:n),"init"===t&&o[t]()})},e}();a.default(window).on("load",function(){It._jQueryInterface.call(a.default('[data-widget="todo-list"]'))}),a.default.fn[Ct]=It._jQueryInterface,a.default.fn[Ct].Constructor=It,a.default.fn[Ct].noConflict=function(){return a.default.fn[Ct]=kt,It._jQueryInterface};var St="Treeview",zt="lte.treeview",Et=a.default.fn[St],Dt=".nav-item",Ft=".nav-treeview",Ht=".menu-open",At='[data-widget="treeview"]',Qt="menu-open",Ot={trigger:At+" .nav-link",animationSpeed:300,accordion:!0,expandSidebar:!1,sidebarButtonSelector:'[data-widget="pushmenu"]'},Mt=function(){function e(e,t){this._config=t,this._element=e}var t=e.prototype;return t.init=function(){a.default(".nav-item.menu-open .nav-treeview.menu-open").css("display","block"),this._setupListeners()},t.expand=function(e,t){var n=this,i=a.default.Event("expanded.lte.treeview");if(this._config.accordion){var o=t.siblings(Ht).first(),l=o.find(Ft).first();this.collapse(l,o)}t.addClass("menu-is-opening"),e.stop().slideDown(this._config.animationSpeed,function(){t.addClass(Qt),a.default(n._element).trigger(i)}),this._config.expandSidebar&&this._expandSidebar()},t.collapse=function(e,t){var n=this,i=a.default.Event("collapsed.lte.treeview");t.removeClass("menu-is-opening menu-open"),e.stop().slideUp(this._config.animationSpeed,function(){a.default(n._element).trigger(i),e.find(".menu-open > .nav-treeview").slideUp(),e.find(Ht).removeClass("menu-is-opening menu-open")})},t.toggle=function(e){var t=a.default(e.currentTarget),n=t.parent(),i=n.find("> .nav-treeview");if(i.is(Ft)||(n.is(Dt)||(i=n.parent().find("> .nav-treeview")),i.is(Ft))){e.preventDefault();var o=t.parents(Dt).first();o.hasClass(Qt)?this.collapse(a.default(i),o):this.expand(a.default(i),o)}},t._setupListeners=function(){var e=this,t=void 0!==this._element.attr("id")?"#"+this._element.attr("id"):"";a.default(document).on("click",""+t+this._config.trigger,function(t){e.toggle(t)})},t._expandSidebar=function(){a.default("body").hasClass("sidebar-collapse")&&a.default(this._config.sidebarButtonSelector).PushMenu("expand")},e._jQueryInterface=function(t){return this.each(function(){var n=a.default(this).data(zt),i=a.default.extend({},Ot,a.default(this).data());n||(n=new e(a.default(this),i),a.default(this).data(zt,n)),"init"===t&&n[t]()})},e}();a.default(window).on("load.lte.treeview",function(){a.default(At).each(function(){Mt._jQueryInterface.call(a.default(this),"init")})}),a.default.fn[St]=Mt._jQueryInterface,a.default.fn[St].Constructor=Mt,a.default.fn[St].noConflict=function(){return a.default.fn[St]=Et,Mt._jQueryInterface},e.CardRefresh=r,e.CardWidget=y,e.ControlSidebar=A,e.DirectChat=R,e.Dropdown=P,e.ExpandableTable=V,e.Fullscreen=ie,e.IFrame=ke,e.Layout=He,e.NavbarSearch=pt,e.PushMenu=Je,e.SidebarSearch=st,e.Toasts=$t,e.TodoList=It,e.Treeview=Mt,Object.defineProperty(e,"__esModule",{value:!0})});let slugEditedManually=$("#slug").length>0&&""!==$("#slug").val().trim(),searchTimeout;function initCurrencyInput(e="body"){$(e+" .currency-input").each(function(){const e=$(this),t=parseInt(e.data("decimals"))||2,a=e.data("thousand-separator")||",",n=e.data("decimal-separator")||".";if(e.on("blur",function(){let e=$(this).val().replace(/[^\d.-]/g,"");if(""===e||"-"===e)return;let i=parseFloat(e);isNaN(i)||$(this).val(formatCurrency(i,t,n,a))}),e.on("focus",function(){let e=$(this).val();e&&(e=e.replace(new RegExp("\\"+a,"g"),""),e=e.replace(new RegExp("\\"+n,"g"),"."),$(this).val(e))}),e.val()){let i=e.val().replace(/[^\d.-]/g,""),o=parseFloat(i);isNaN(o)||e.val(formatCurrency(o,t,n,a))}})}function formatCurrency(e,t,a,n){const i=e.toFixed(t).split(".");return i[0]=i[0].replace(/\B(?=(\d{3})+(?!\d))/g,n),i.join(a)}$(function(){$(document).on("click",".jw-checkbox .custom-control-input",function(){$(this).closest(".jw-checkbox").find(".jw-checkbox-input").val($(this).is(":checked")?"1":"0")}),$(document).on("change",".select-language",function(){const e=$(this).val(),t=new URL(window.location.href);t.searchParams.set("locale",e),window.location.href=t.toString()}),$(document).on("input",".slug-target",function(){let e=$(this).val().trim();slugEditedManually=""!==e}),$(document).on("click",".edit-slug",function(){let e=$(this).closest(".input-group").find(".slug-target").prop("disabled");$(this).closest(".input-group").find(".slug-target").prop("disabled",!e).focus()}),$(".slug-source").on("keyup",function(){if(slugEditedManually)return;let e=$(this).val().toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim().replace(/[^a-z0-9\- ]/g,"").replace(/\s+/g,"-").replace(/\-+/g,"-");$("#slug").val(e)}),$(document).on("click",".edit-security",function(){let e=$(this).closest(".input-group").find(".form-control"),t=e.prop("disabled");e.prop("disabled",!t).focus()}),$(document).on("click",".add-repeater-item",function(){let e=$(this).closest(".repeater-component").find('script[type="text/html"]').html(),t=uuidv4();e=e.replace(/__marker__/g,t),$(this).closest(".repeater-component").find(".repeaters").append(e)}),$(document).on("click",".remove-repeater-item",function(){$(this).closest(".repeater-item").remove()}),initSelect2("body"),initDatepicker("body"),initEditor("body"),initQuickAddCategory("body"),$(document).on("click",'.jw-datatable-bulk-action[data-action="translate"]',function(e){e.preventDefault(),e.stopPropagation();let t=$(this).data("endpoint"),a=$(".jw-datatable-checkbox:checked").map(function(){return $(this).val()}).get();return 0===a.length?(alert(juzaweb.lang.please_select_at_least_one_row||"Please select at least one row"),!1):($("#translate-modal").data("ids",a),$("#translate-modal").data("endpoint",t),$("#translate-modal").modal("show"),!1)}),$(document).on("click","#translate-submit",function(){let e=$("#translate-modal"),t=$(this).data("model"),a=$("#translate-source-locale").val(),n=$("#translate-target-locale").val(),i=e.data("ids");$.ajax({type:"POST",url:juzaweb.adminUrl+"/translations/translate-model",dataType:"json",data:{ids:i,source:a,locale:n,model:t},beforeSend:function(){toggle_global_loading(!0)},success:function(t){if(toggle_global_loading(!1),t.history_ids&&t.history_ids.length>0){e.modal("hide");let a=$("#translate-progress-modal");a.modal("show"),$("#translate-progress-bar").css("width","0%").attr("aria-valuenow",0).text("0%").removeClass("bg-success bg-danger").addClass("progress-bar-animated progress-bar-striped bg-primary"),$("#translate-progress-status").text(juzaweb.lang.translation_processing||"Processing..."),$("#translate-progress-detail").text("");let n=t.history_ids,i=setInterval(function(){$.ajax({url:juzaweb.adminUrl+"/translations/translate-status",type:"POST",data:{history_ids:n},success:function(e){let n=e.success+e.failed,o=Math.round(n/e.total*100);$("#translate-progress-bar").css("width",o+"%").attr("aria-valuenow",o).text(o+"%");let l=juzaweb.lang.translating_items||"Translating :current of :total items...";l=l.replace(":current",n).replace(":total",e.total),$("#translate-progress-detail").text(l),e.completed&&(clearInterval(i),e.failed>0?($("#translate-progress-status").text(juzaweb.lang.translation_failed||"Translation failed"),$("#translate-progress-bar").removeClass("progress-bar-animated progress-bar-striped bg-primary").addClass("bg-danger")):($("#translate-progress-status").text(juzaweb.lang.translation_completed||"Translation completed"),$("#translate-progress-bar").removeClass("progress-bar-animated progress-bar-striped bg-primary").addClass("bg-success")),setTimeout(function(){a.modal("hide"),show_notify(t),$("#select-all").prop("checked",!1),$(".jw-datatable-bulk-actions .dropdown-toggle").prop("disabled",!0),$("#jw-datatable").DataTable().draw()},2e3))},error:function(){clearInterval(i),a.modal("hide"),show_notify({status:"error",message:"Error checking translation status"})}})},2e3)}else show_notify(t),e.modal("hide"),$("#select-all").prop("checked",!1),$(".jw-datatable-bulk-actions .dropdown-toggle").prop("disabled",!0),$("#jw-datatable").DataTable().draw()},error:function(e){toggle_global_loading(!1),show_notify(e)},complete:function(){toggle_global_loading(!1)}})}),$(document).on("click",".translate-model",function(e){e.preventDefault();var t=$(this),a=t.data("id"),n=t.data("model"),i=t.data("locale"),o=t.data("source");a&&n&&i&&$.ajax({url:juzaweb.adminUrl+"/translations/translate-model",type:"POST",data:{ids:a,model:n,locale:i,source:o},beforeSend:function(){toggle_global_loading(!0)},success:function(e){if(toggle_global_loading(!1),e.history_ids&&e.history_ids.length>0){let t=$("#translate-progress-modal");t.modal("show"),$("#translate-progress-bar").css("width","0%").attr("aria-valuenow",0).text("0%").removeClass("bg-success bg-danger").addClass("progress-bar-animated progress-bar-striped bg-primary"),$("#translate-progress-status").text(juzaweb.lang.translation_processing||"Processing..."),$("#translate-progress-detail").text("");let a=e.history_ids,n=setInterval(function(){$.ajax({url:juzaweb.adminUrl+"/translations/translate-status",type:"POST",data:{history_ids:a},success:function(a){let i=a.success+a.failed,o=Math.round(i/a.total*100);$("#translate-progress-bar").css("width",o+"%").attr("aria-valuenow",o).text(o+"%");let l=juzaweb.lang.translating_items||"Translating :current of :total items...";l=l.replace(":current",i).replace(":total",a.total),$("#translate-progress-detail").text(l),a.completed&&(clearInterval(n),a.failed>0?($("#translate-progress-status").text(juzaweb.lang.translation_failed||"Translation failed"),$("#translate-progress-bar").removeClass("progress-bar-animated progress-bar-striped bg-primary").addClass("bg-danger")):($("#translate-progress-status").text(juzaweb.lang.translation_completed||"Translation completed"),$("#translate-progress-bar").removeClass("progress-bar-animated progress-bar-striped bg-primary").addClass("bg-success")),setTimeout(function(){t.modal("hide"),show_notify(e),window.location.reload()},2e3))},error:function(){clearInterval(n),t.modal("hide"),show_notify({status:"error",message:"Error checking translation status"})}})},2e3)}else show_notify(e)},error:function(e){toggle_global_loading(!1),show_notify(e)}})}),initCurrencyInput("body"),$(document).on("close.bs.alert",".jw-message",function(){$.ajax({url:juzaweb.adminUrl+"/remove-message",type:"POST",data:{},success:function(e){}})})}),$(function(){$(document).on("click","#select-all",function(){const e=$("#jw-datatable").DataTable().rows({search:"applied"}).nodes(),t=this.checked;$('input[type="checkbox"]',e).prop("checked",t),$(".jw-datatable-bulk-actions .dropdown-toggle").prop("disabled",!t)}),$(document).on("change",".jw-datatable-checkbox",function(){const e=$(".jw-datatable-checkbox:checked").length>0;$(".jw-datatable-bulk-actions .dropdown-toggle").prop("disabled",!e)}),$(document).on("input",'.jw-datatable_filter input[type="search"]',function(){clearTimeout(searchTimeout);const e=this.value;searchTimeout=setTimeout(function(){$("#jw-datatable").DataTable().search(e).draw()},300)}),$(document).on("click",'#jw-datatable .datatables-row-action[data-type="action"]',function(){let e=[$(this).data("id")],t=$(this).data("action"),a=$(this).data("endpoint");return"delete"==t?confirm_message(juzaweb.lang.remove_question,function(n){n&&sendDataTablesActionRequest(a,e,t)}):sendDataTablesActionRequest(a,e,t),!1}),$(document).on("click",'.jw-datatable-bulk-action[data-type="action"]',function(){let e=$(this).data("action"),t=$(this).data("endpoint"),a=$(".jw-datatable-checkbox:checked").map(function(){return $(this).val()}).get();"delete"==e?confirm_message(juzaweb.lang.remove_question,function(n){n&&sendDataTablesActionRequest(t,a,e)}):sendDataTablesActionRequest(t,a,e)}),$(document).on("change",".jw-datatable_filters input, .jw-datatable_filters select",function(){const e=$(this).attr("name"),t=$(this).val();let a=new URL(window.location.href),n=new URLSearchParams(a.search);n.set(e,t),a.search=n.toString();let i=a.toString();window.history.pushState({path:i},"",i),$("#jw-datatable").DataTable().ajax.url(i),$("#jw-datatable").DataTable().ajax.reload()})});let juzawebFileManager=function(e,t){let a=e.type||"image",n=e.disk||null,i=e.prefix,o=e.multichoose||!1;"/"!==i[0]&&(i="/"+i);let l=void 0!==window.screenLeft?window.screenLeft:window.screenX,s=e.width?e.width:800,r=e.height?e.height:500,d=void 0!==window.screenTop?window.screenTop:window.screenY,c=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,u=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,f=c/window.screen.availWidth,h=(c-s)/2/f+l,m=(u-r)/2/f+d;window.open(i+"?type="+a+(o?"&multichoose=1":"")+(n?"&disk="+n:""),"File Manager","scrollbars=yes, width="+s/f+", height="+r/f+", top="+m+", left="+h),window.SetUrl=t};function initSelect2(e="body"){$(e+" .select2-input").select2({width:$(this).data("width")||"100%",placeholder:$(this).data("placeholder")||null}),$(e+" .load-data").each(function(){const e=$(this);e.select2({allowClear:!0,dropdownAutoWidth:!e.data("width"),width:e.data("width")||"100%",placeholder:function(e){return{id:null,text:e.placeholder}},ajax:{method:"GET",url:e.data("url"),dataType:"json",data:function(t){let a=e.data("explodes")?e.data("explodes"):null;return a&&(a=$("."+a).map(function(){return $(this).val()}).get()),{q:$.trim(t.term),page:t.page,explodes:a}}}})}),$(e+" .tags-input").each(function(){const e=$(this);e.select2({theme:"bootstrap4",tags:!0,tokenSeparators:[","],placeholder:e.data("placeholder"),ajax:{url:e.data("url"),dataType:"json",delay:250,data:function(e){return{q:e.term,page:e.page}}},createTag:function(e){var t=$.trim(e.term);return""===t?null:{id:t,text:t,newTag:!0}}})})}$.fn.filemanager=function(e,t){let a=this,n="/admin/"+juzaweb.websiteId+"/file-manager/public/browser";this.on("click",function(t){juzawebFileManager({type:e,prefix:n},function(e){let t=e[0];if(a.data("input")){$("#"+a.data("input")).val(t.path)}if(a.data("preview")){$("#"+a.data("preview")).html('<img src="'+t.url+'" alt="'+t.name+'">')}if(a.data("name")){$("#"+a.data("name")).html(t.name)}})})},$(function(){const e=$("body");e.on("click",".file-manager",function(){let e=$(this).data("type")||"image",t=$(this).data("input"),a=$(this).data("preview"),n=$(this).data("name"),i=$(this).data("disk")||"public",o=`/admin/${juzaweb.websiteId}/file-manager/${i}/browser`;juzawebFileManager({type:e,prefix:o,disk:i},function(e){let i=e[0];if(t){$("#"+t).val(i.path)}if(a){$("#"+a).html('<img src="'+i.url+'" alt="">')}if(n){$("#"+n).html(i.name)}})}),e.on("click",".form-image",function(){let e=$(this),t=e.find(".input-path"),a=e.find(".dropify-render"),n=e.find(".dropify-filename-inner"),i="/admin/"+juzaweb.websiteId+"/file-manager/public/browser";juzawebFileManager({type:"image",prefix:i},function(i){let o=i[0];t.val(o.path),a.html('<img src="'+o.url+'" alt="">'),n.html(o.name),e.addClass("previewing"),e.find(".image-hidden").show()})}),e.on("click",".form-image .image-clear",function(e){e.stopPropagation();let t=$(this).closest(".form-image"),a=t.find(".input-path"),n=t.find(".dropify-render"),i=t.find(".dropify-filename-inner");a.val(""),n.html(""),i.html(""),t.removeClass("previewing"),t.find(".image-hidden").hide()}),e.on("click",".add-image-images",function(){let e="/admin/"+juzaweb.websiteId+"/file-manager/public/browser",t=$(this).closest(".form-images"),a=t.find(".input-name").val();juzawebFileManager({type:"image",prefix:e,multichoose:!0},function(e){let n=document.getElementById("form-images-template").innerHTML,i="";$.each(e,function(e,t){i+=replace_template(n,{name:a,url:t.url,path:t.path})}),t.find(".images-list .image-item:last").before(i)})}),e.on("click",".form-images .remove-image-item",function(){$(this).closest(".image-item").remove()})}),$(function(){function sendMessageByResponse(e,t=!0,a=null){t?void 0!==show_notify&&"function"==typeof show_notify&&show_notify(e):void 0!==show_message&&"function"==typeof show_message&&show_message(e,!1,a)}function sendRequestFormAjax(form,data,btnsubmit,currentText,currentIcon,captchaToken=null,jwToken){let submitSuccess=form.data("success"),notify=form.data("notify")??!0,elResult=form.find(".jquery-message")??null;captchaToken&&data.append("g-recaptcha-response",captchaToken),jwToken&&data.append("jw-token",jwToken),$.ajax({type:form.attr("method"),url:form.attr("action"),dataType:"json",data:data,cache:!1,contentType:!1,processData:!1,success:function(response){return sendMessageByResponse(response,notify,elResult),response.redirect||response.redirect_url?(setTimeout(function(){window.location=response.redirect||response.redirect_url},1e3),!1):(btnsubmit.find("i").attr("class",currentIcon),btnsubmit.prop("disabled",!1),btnsubmit.data("loading-text")&&btnsubmit.html(currentText),!1!==response.success&&void(submitSuccess&&eval(submitSuccess)(form,response)))},error:function(e,t,a){let n=e.responseJSON;if(422===e.status){let t=0;void 0!==n.errors&&$.each(n.errors,function(e,a){form.find(".error-"+e).length&&(form.find(".error-"+e).html(a[0]),t+=1)}),0===t&&sendMessageByResponse(e,notify,elResult)}else sendMessageByResponse(e,notify,elResult);btnsubmit.find("i").attr("class",currentIcon),btnsubmit.prop("disabled",!1),btnsubmit.data("loading-text")&&btnsubmit.html(currentText)}})}function validate_isNumberKey(e){let t=e.which?e.which:event.keyCode;return 59==t||46==t||!(t>31&&(t<48||t>57))}function validate_FormatNumber(e){e.value=e.value.replace(/\,/gi,""),e.value=e.value.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$(document).ajaxError(function(e,t,a,n){401===t.status&&(alert("Your session has expired. Please login again."),window.location.reload()),419===t.status&&(alert("Your session has expired. Please login again."),window.location.reload())}),$(document).on("submit",".form-ajax",function(e){if(e.isDefaultPrevented())return!1;e.preventDefault();let t=$(this),a=new FormData(t[0]),n=t.find("button[type=submit]"),i=n.html(),o=n.find("i").attr("class");t.data("jw-token");if(n.find("i").attr("class","fas fa-spinner fa-spin"),n.prop("disabled",!0),n.data("loading-text")&&n.html('<i class="fas fa-spinner fa-spin"></i> '+n.data("loading-text")),"undefined"!=typeof grecaptcha)return loadRecapchaAndSubmit(function(e){sendRequestFormAjax(t,a,n,i,o,e)}),!1;sendRequestFormAjax(t,a,n,i,o)}),$(document).on("keypress",".is-number",function(){return validate_isNumberKey(this)}),$(document).on("keyup",".number-format",function(){return validate_FormatNumber(this)})}),$(function(){initSelect2("body")}),$(function(){const e=$("#media-container");let t=!1,a=window.mediaInfiniteScroll?window.mediaInfiniteScroll.currentPage:1,n=!window.mediaInfiniteScroll||window.mediaInfiniteScroll.hasMorePages,i=null;function o(e){let t=document.getElementById("media-detail-template").innerHTML,a=JSON.parse(e.find(".item-info").val());a.name=htmlspecialchars(a.name),t=replace_template(t,a);const n=$("#media-preview-modal");n.find(".modal-body").html(t),n.modal("show")}function l(e,t,a){confirm_message(juzaweb.lang.remove_question.replace(":name",1==t?" file "+a:" folder "+a),function(a){if(!a)return!1;toggle_global_loading(!0),$.ajax({url:juzaweb.adminUrl+"/media/"+e,type:"DELETE",data:{is_file:t},success:function(e){toggle_global_loading(!1),show_notify(e),setTimeout(function(){window.location.reload()},500)},error:function(e){toggle_global_loading(!1),show_notify(e)}})})}e.on("click",".show-form-upload",function(){let e=$(".media-upload-form");e.is(":hidden")?e.show("slow"):e.hide("slow")}),e.on("contextmenu",".media-item",function(e){e.preventDefault(),i=$(this);return $("#context-menu").css({display:"block",left:e.pageX+"px",top:e.pageY+"px"}),!1}),$(document).on("click",function(e){$(e.target).closest("#context-menu").length||$("#context-menu").hide()}),$("#context-menu").on("click",".context-menu-item",function(){const e=$(this).data("action");if($("#context-menu").hide(),i){if("view-detail"===e){const e=i.find(".media-item-info");e.hasClass("media-file-item")&&o(e)}else if("delete"===e){const e=i.find(".media-item-info"),t=JSON.parse(e.find(".item-info").val());l(t.id,t.is_file,t.name)}i=null}}),e.on("click",".media-file-item",function(){o($(this))}),$("#media-preview-modal").on("click",".delete-file",function(){l($(this).data("id"),$(this).data("is_file"),$(this).data("name"))}),$(".list-media").on("scroll",function(){const e=$(this).scrollTop(),i=$(this)[0].scrollHeight;e+$(this).height()>=.8*i&&function(){if(t||!n)return;t=!0,$(".loading-indicator").show();const e=a+1,i=new URLSearchParams(window.location.search);i.set("page",e);const o=$("#media-container").data("folder-id");let l=juzaweb.adminUrl+"/media/load-more";o&&(l=juzaweb.adminUrl+"/media/folder/"+o+"/load-more"),$.ajax({url:l+"?"+i.toString(),type:"GET",success:function(e){e.html&&""!==e.html.trim()&&($(".media-list").append(e.html),"undefined"!=typeof lazySizes&&lazySizes.autoSizer&&lazySizes.autoSizer.checkElems(),a=e.current_page,n=e.has_more),t=!1,$(".loading-indicator").hide()},error:function(e){console.error("Error loading more media:",e),t=!1,$(".loading-indicator").hide()}})}()})}),$(function(){const e=$("body");let t=1,a=!0,n=!1,i=null,o=null;if(0===$("#jw-media-modal").length){let t="/admin/file-manager/public/upload";"undefined"!=typeof juzaweb&&juzaweb.websiteId&&(t="/admin/"+juzaweb.websiteId+"/file-manager/public/upload");let a=`\n            <div class="modal fade" id="jw-media-modal" tabindex="-1" role="dialog" aria-hidden="true">\n                <div class="modal-dialog modal-xl" style="max-width: 90%; height: 90%; margin: 30px auto;">\n                    <div class="modal-content" style="height: 100%;">\n                        <div class="modal-header" style="display: block;">\n                            <div class="d-flex justify-content-between align-items-center">\n                                <ul class="nav nav-tabs mb-0" role="tablist">\n                                    <li class="nav-item">\n                                        <a class="nav-link active" id="library-tab" data-toggle="tab" href="#library" role="tab">\n                                            <i class="fa fa-images"></i> Media Library\n                                        </a>\n                                    </li>\n                                    <li class="nav-item">\n                                        <a class="nav-link" id="upload-tab" data-toggle="tab" href="#upload" role="tab">\n                                            <i class="fa fa-cloud-upload-alt"></i> Upload Files\n                                        </a>\n                                    </li>\n                                </ul>\n                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                    <span aria-hidden="true">&times;</span>\n                                </button>\n                            </div>\n                        </div>\n                        <div class="modal-body p-0" style="overflow-y: auto;">\n                            <div class="tab-content h-100">\n                                <div class="tab-pane fade show active h-100" id="library" role="tabpanel">\n                                    <div class="media-list-container p-3 h-100" style="overflow-y: auto;">\n                                        <ul class="media-list row list-unstyled"></ul>\n                                        <div class="loading-indicator text-center p-3" style="display: none;">\n                                            <i class="fa fa-spinner fa-spin fa-2x"></i>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class="tab-pane fade h-100" id="upload" role="tabpanel">\n                                    <div class="upload-container p-4">\n                                        <form action="${t}" id="dropzoneForm" class="dropzone">\n                                            <input type="hidden" name="_token" value="${$('meta[name="csrf-token"]').attr("content")}">\n                                            <input type="hidden" name="working_dir" id="upload_working_dir" value="">\n                                            <div class="dz-message text-center p-5">\n                                                <i class="fa fa-cloud-upload-alt fa-4x mb-3 text-muted"></i>\n                                                <h4>Drop files here or click to upload</h4>\n                                                <p class="text-muted">You can upload multiple files at once</p>\n                                            </div>\n                                        </form>\n                                        <div class="upload-info mt-3 alert alert-info" style="display: none;">\n                                            <i class="fa fa-info-circle"></i> <span class="upload-message"></span>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `;e.append(a)}const l=$("#jw-media-modal"),s=l.find(".media-list"),r=l.find(".loading-indicator"),d=l.find(".modal-body");let c=null;function u(e,i=null,o=null,l=!0){if(n)return;n=!0,r.show();let d="/admin/media/load-more";"undefined"!=typeof juzaweb&&juzaweb.websiteId&&(d="/admin/"+juzaweb.websiteId+"/media/load-more"),i&&(d="/admin/"+juzaweb.websiteId+"/media/folder/"+i+"/load-more");let c={page:e};o&&(c.type=o),$.ajax({url:d,type:"GET",data:c,success:function(e){l?s.append(e.html):s.html(e.html),t=e.current_page,a=e.has_more,n=!1,r.hide(),"undefined"!=typeof lazySizes&&lazySizes.autoSizer&&lazySizes.autoSizer.checkElems()},error:function(){n=!1,r.hide()}})}e.on("click",".form-image-modal",function(){c=$(this),t=1,a=!0,i=null,o=$(this).data("type")||null,s.empty(),u(t,i,o),l.modal("show")}),e.on("click",".upload-url-media-picker",function(){let e=$(this).data("input"),n=$("#"+e);0!==n.length&&(c=n,t=1,a=!0,i=null,o=$(this).data("type")||null,s.empty(),u(t,i,o),l.modal("show"))}),e.on("click",".tinymce-media-picker",function(){t=1,a=!0,i=null,o=$(this).data("type")||null,s.empty(),l.data("tinymce-mode",!0),u(t,i,o),l.modal("show")});let f=[],h=null;e.on("click",".add-image-images-modal",function(){h=$(this).closest(".form-images"),f=[],t=1,a=!0,i=null,o=$(this).data("type")||"image",s.empty(),l.data("multiple-mode",!0),l.find("#library .media-list-container").prepend('<div class="text-right mb-2"><button type="button" class="btn btn-success btn-confirm-selection" style="display:none;"><i class="fa fa-check"></i> Add Selected</button></div>'),u(t,i,o),l.modal("show")}),l.on("click",".media-file-item",function(e){if(!l.data("multiple-mode"))return;e.preventDefault(),e.stopPropagation();let t=$(this),a=t.find(".item-info").val(),n=JSON.parse(a);t.hasClass("selected")?(t.removeClass("selected"),t.find(".selection-checkmark").remove(),f=f.filter(e=>e.path!==n.path)):(t.addClass("selected"),t.find(".attachment-preview").append('<div class="selection-checkmark"><i class="fa fa-check-circle"></i></div>'),f.push(n)),f.length>0?l.find(".btn-confirm-selection").show():l.find(".btn-confirm-selection").hide()}),l.on("click",".btn-confirm-selection",function(){if(!h||0===f.length)return;let e=h.find(".input-name").val(),t=document.getElementById("form-images-template").innerHTML,a="";$.each(f,function(n,i){a+=replace_template(t,{name:e,url:i.url,path:i.path})}),h.find(".images-list .image-item:last").before(a),l.modal("hide")}),l.on("hidden.bs.modal",function(){l.data("multiple-mode",!1),l.data("tinymce-mode",!1),l.find(".btn-confirm-selection").remove(),l.find(".media-file-item").removeClass("selected"),l.find(".selection-checkmark").remove(),f=[],h=null}),d.on("scroll",function(){$(this).scrollTop()+$(this).innerHeight()>=$(this)[0].scrollHeight-100&&a&&!n&&u(t+1,i,o)}),l.on("click",".media-file-item",function(e){if(l.data("multiple-mode"))return;e.preventDefault();let t=$(this).find(".item-info").val(),a=JSON.parse(t);if(l.data("tinymce-mode"))return window.tinyMceCallback&&(window.tinyMceCallback(a.url),window.tinyMceCallback=null),void l.modal("hide");if(c){if(c.is("input"))c.val(a.path);else{let e=c.find(".input-path"),t=c.find(".dropify-render"),n=c.find(".dropify-filename-inner");e.val(a.path),t.html('<img src="'+a.url+'" alt="">'),n.html(a.name),c.addClass("previewing"),c.find(".image-hidden").show()}l.modal("hide")}}),l.on("click",".media-item a:not(.media-file-item)",function(e){e.preventDefault();let n=$(this).data("id");n&&(i=n,t=1,a=!0,u(t,i,o,!1))}),e.on("click",".form-image-modal .image-clear",function(e){e.stopPropagation();let t=$(this).closest(".form-image-modal"),a=t.find(".input-path"),n=t.find(".dropify-render"),i=t.find(".dropify-filename-inner");a.val(""),n.html(""),i.html(""),t.removeClass("previewing"),t.find(".image-hidden").hide()});let m=null;l.on("shown.bs.tab","#upload-tab",function(e){if(m)return;Dropzone.autoDiscover=!1;let n=null;if(o){n={image:"image/*",video:"video/*",audio:"audio/*",document:".pdf,.doc,.docx,.txt",file:"*"}[o]||null}m=new Dropzone("#dropzoneForm",{paramName:"upload",uploadMultiple:!1,parallelUploads:5,timeout:0,acceptedFiles:n,maxFilesize:15,chunking:!0,forceChunking:!0,chunkSize:1e6,headers:{Authorization:"Bearer "+$('meta[name="csrf-token"]').attr("content")},init:function(){this.on("success",function(e,n){l.find(".upload-info").show().removeClass("alert-danger").addClass("alert-success"),l.find(".upload-message").text("File uploaded successfully!"),this.removeFile(e),t=1,a=!0,s.empty(),u(t,i,o,!1),setTimeout(function(){$("#library-tab").tab("show"),l.find(".upload-info").hide()},1500)}),this.on("error",function(e,t){l.find(".upload-info").show().removeClass("alert-success").addClass("alert-danger"),l.find(".upload-message").text("Upload failed: "+(t.message||t)),this.removeFile(e)}),this.on("sending",function(e,t,a){a.append("working_dir",i||"")})}})}),e.on("show.bs.modal","#jw-media-modal",function(){$("#upload_working_dir").val(i||"")})}),$(function(){var e=function(e){var t=e.length?e:$(e.target);window.JSON?$("#items-output").val(window.JSON.stringify(t.nestable("serialize"))):alert("JSON browser support required for this application.")};$("#jw-menu-builder").nestable({noDragClass:"dd-nodrag"}).on("change",e),e($("#jw-menu-builder")),$("#menu-container").on("submit",".form-menu-block",function(t){if(t.isDefaultPrevented())return!1;t.preventDefault();const a=$(this),n=new FormData(a[0]),i=a.data("key");let o={},l='data-target="_self"';for(const[e,t]of n.entries())o[e]=t,l+=` data-${e}="${htmlspecialchars(t)}"`;let s=a.data("template"),r=document.getElementById("template-menu-item").innerHTML,d=document.getElementById("template-menu-item-"+s).innerHTML;if("custom"===s)d=replace_template(d,o),r=replace_template(r,{slot:d,label:htmlspecialchars(o.label),attributes:l}),$("#jw-menu-builder .dd-empty").remove(),$("#jw-menu-builder .dd-list:first").append(r);else{let e=a.find(`.select-all-${i}:checked`);$("#jw-menu-builder .dd-empty").remove(),$.each(e,function(e,t){let a={},n="";$.each($(t).data(),function(e,t){a[e]=t,n+=` data-${e}="${htmlspecialchars(t)}"`});let i=replace_template(d,a),o=replace_template(r,{slot:i,label:htmlspecialchars($(t).data("label")),attributes:n});$("#jw-menu-builder .dd-list:first").append(o)})}return e($("#jw-menu-builder")),a.find(".reset-after-add").each(function(){$(this).is(":checkbox")||$(this).is(":radio")?$(this).prop("checked",!1):$(this).val("")}),!1}),$("#menu-container").on("click",".btn-add-menu",function(){let e=$(".form-add-menu");e.is(":hidden")?e.show("slow"):e.hide("slow")}),$("#menu-container").on("change",".form-select-menu .load-menu",function(){let e=$(this).val();e&&(window.location=juzaweb.adminUrl+"/menus/"+e)}),$("#menu-container").on("click",".card-menu-items .card-header",function(){let e=$(this).closest(".card-menu-items").find(".card-body");e.is(":hidden")?($(".card-menu-items").find(".card-body").slideUp("slow"),$(".card-menu-items").find(".card-header").removeClass("bg-light"),$(this).closest(".card-menu-items").find(".card-header").addClass("bg-light"),e.slideDown("slow")):(e.slideUp("slow"),$(this).closest(".card-menu-items").find(".card-header").removeClass("bg-light"))}),$("#menu-container").on("click",".show-menu-edit",function(e){let t=$(this).closest(".dd-item").find(".form-item-edit").first();t.is(":hidden")?t.slideDown("slow"):t.slideUp("slow")}),$("#menu-container").on("click",".delete-menu",function(e){let t=$(this).data("id"),a=$(this).data("name");confirm_message(juzaweb.lang.remove_question.replace(":name",a),function(e){e&&$.ajax({url:juzaweb.adminUrl+"/menus/"+t,type:"DELETE",dataType:"json",success:function(e){show_message(e),window.location=juzaweb.adminUrl+"/menus"},error:function(){show_notify({success:!1,message:"Error fetching data"})}})})}),$("#menu-container").on("change",".menu-data",function(){let t=$(this).data("name"),a=$(this).val();$(this).closest("li").data(t,a),e($("#jw-menu-builder")),$(this).hasClass("change-label")&&$(this).closest("li").find(".dd-handle span:first").text(a)}),$("#menu-container").on("click",".delete-menu-item",function(){$(this).closest("li").remove(),e($("#jw-menu-builder"))}),$("#menu-container").on("click",".close-menu-item",function(){let e=$(this).closest(".dd-item").find(".form-item-edit").first();e.is(":hidden")?e.slideDown("slow"):e.slideUp("slow")}),$("#menu-container").on("change",".select-all-checkbox",function(){let e=$(this).data("select"),t=$(this).is(":checked");$(this).closest(".tab-pane").find("."+e).prop("checked",t)}),$("#menu-container").on("keyup",".menu-box-model-search",function(){let e=$(this).val(),t=$(this).data("key"),a=$(this).closest(".tab-pane").find(".box-tab-search-result"),n=$(this).data("url");return a.html(""),e.length<=0||$.ajax({url:n,type:"GET",dataType:"json",data:{q:e,per_page:5},success:function(e){let n="";$.each(e.results,function(e,a){n+=`<div class="form-check mt-1">\n                        <label class="form-check-label">\n                            <input\n                                class="form-check-input reset-after-add select-all-${t}"\n                                type="checkbox"\n                                name="items[]"\n                                value="${a.id}"\n                                data-id=""\n                                data-key="${t}"\n                                data-menuable_id="${a.id}"\n                                data-target="_self"\n                                data-label="${htmlspecialchars(a.text)}"\n                                data-edit_url="${a.edit_url}"\n                                data-menuable_class_name="${a.menuable_class_name}"\n                                data-menuable_class="${a.menuable_class}"\n                            >\n                            ${a.text}\n                        </label>\n                    </div>`}),a.html(n)},error:function(){show_notify({success:!1,message:"Error fetching data"})}}),!1})}),$(function(){$(".jw-widget-builder").nestable({noDragClass:"dd-nodrag",maxDepth:1}),$("#widget-container").on("click",".dropdown-action",function(){let e=$(this).closest(".widget-block"),t=e.find(".sidebar-blocks"),a=$(this).find(".toggle-icon");t.is(":visible")?(t.slideUp(250),e.removeClass("open"),a.removeClass("rotated")):(t.slideDown(250),e.addClass("open"),a.addClass("rotated"))}),$("#widget-container").on("submit",".form-add-widget",function(e){e.preventDefault();let t=new FormData($(this)[0]),a=$(this).find("button[type=submit]"),n=a.find("i").attr("class"),i=t.get("widget"),o=t.get("widget_label"),l=$(this).find('input[name="sidebars[]"]:checked').map(function(){return{key:$(this).val()}}).get(),s=document.getElementById("sidebar-widget-form-template").innerHTML;return a.find("i").attr("class","fa fa-spinner fa-spin"),a.prop("disabled",!0),$.each(l,function(e,t){let a=uuidv4(),n=replace_template(document.getElementById(`widget-${i}-form`).innerHTML,{key:a}),l=replace_template(s,{key:a,widget_key:i,widget_label:o,form:n});$("#sidebar-"+t.key+" .jw-widget-builder .dd-empty").remove(),$("#sidebar-"+t.key+" .dd-list").append(l)}),$.each(l,function(e,t){initSelect2("#dd-item-"+t.key)}),a.find("i").attr("class",n),a.prop("disabled",!1),!1}),$("#widget-container").on("click",".widget-sidebar-item",function(){let e=$(this),t=e.find("input").is(":checked"),a=e.closest(".form-add-widget"),n=a.find("button[type=submit]");t?(e.find("span").html(""),e.find("input").prop("checked",!1)):(e.find("span").html('<i class="fa fa-check"></i>'),e.find("input").prop("checked",!0)),a.find(".widget-sidebar-item input:checked").length>0?n.prop("disabled",!1):n.prop("disabled",!0)}),$("#widget-container").on("click",".show-edit-form",function(){let e=$(this).closest(".sidebar-item").find(".card-body");e.is(":hidden")?e.show():e.hide()}),$("#widget-container").on("click",".show-item-form",function(){let e=$(this).closest(".dd-item").find(".form-item-edit");e.is(":hidden")?e.show():e.hide()}),$("#widget-container").on("click",".delete-item-form",function(){$(this).closest(".dd-item").remove()})}),$(function(){$(document).on("click",".show-form-block",function(){let e=$(this).closest(".dd-item").find(".form-block-edit");e.is(":hidden")?e.show():e.hide()}),$(document).on("click",".remove-form-block",function(){$(this).closest(".dd-item").remove()}),$(document).on("change","#template",function(){let e=$(this).val(),t=window.location.href,a=new URLSearchParams(window.location.search);a.set("template",e),window.location=t.split("?")[0]+"?"+a.toString()}),$(document).on("click",".add-block-data",function(){let e=$(this).data("block"),t=$(this).data("content_key"),a=$(this),n=document.getElementById("block-"+e+"-template").innerHTML,i=(new Date).getTime()+"-"+uuidv4();n=replace_template(n,{marker:i,content_key:t}),a.closest(".page-block-content").find(".dd-empty").remove(),a.closest(".page-block-content").find(".dd-list").append(n),initSelect2("#page-block-"+i)})});
